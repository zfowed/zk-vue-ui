(("undefined"!==typeof self?self:this)["webpackJsonpzkm_vue_ui"]=("undefined"!==typeof self?self:this)["webpackJsonpzkm_vue_ui"]||[]).push([[18],{"96bd":function(e,t,s){"use strict";var l=s("f08a"),a=s.n(l);a.a},bd40:function(e,t,s){"use strict";s.r(t);s("7f7f");var l=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{class:["zk-image-upload",{"zk-image-upload-loading":e.isUpload}]},[s("div",{staticClass:"zk-image-upload-progress"},[s("div",{staticClass:"zk-progress",style:"padding-top: "+e.uploadProgress+"%;"},[s("div",{staticClass:"zk-progress-bar"}),s("div",{staticClass:"zk-progress-text"},[s("span",[e._v(e._s(e.uploadProgress)+"%")])])])]),s("zk-image-select",{ref:"imageSelect",attrs:{"view-src-list":e.viewSrcList,options:e.currentOptions,readonly:e.readonly,cover:e.cover},on:{"change-file":e.changeFile},model:{value:e.src,callback:function(t){e.src=t},expression:"src"}},[e._t("label",null,{slot:"label"}),e.$slots["upload-label"]?e._t("upload-label",null,{slot:"select-label"}):e._t("default",[e._v("重新上传")],{slot:"select-label"})],2)],1)},a=[],r=(s("f751"),s("7191")),i=s("c440"),n=i["a"].msgbox,o={name:"ZkImageUpload",components:{"zk-image-select":r["default"]},props:{value:String,options:Object,viewSrcList:Array,readonly:{type:Boolean,required:!1},cover:{type:Boolean,required:!1},httpRequest:{type:Function,required:!0}},data:function(){return{src:this.value,currentValue:this.value,isUpload:!1,uploadProgress:0}},computed:{currentOptions:function(){return Object.assign({},this.options||{})}},watch:{value:function(){this.src=this.value,this.currentValue=this.value},currentValue:function(){this.currentValue||this.$emit("upload-result",void 0),this.$emit("input",this.currentValue)}},methods:{changeFile:function(e){var t=this;e?(this.uploadProgress=0,this.isUpload=!0,this.httpRequest({data:{file:e},onProgress:function(e){t.uploadProgress=e.loaded/e.total*100|0},onSuccess:function(e){t.currentValue=e,t.src=t.currentValue,t.isUpload=!1},onError:function(e){t.currentValue="",t.src="",t.isUpload=!1,n.alert(String(e)||"上传失败，请检查网络是否再正常，再重新上传。","上传失败",{closeOnClickModal:!0,confirmButtonText:"重新上传",callback:function(e){if(t.$refs.imageSelect&&"confirm"===e)return t.$refs.imageSelect.selectImage()}})}})):this.currentValue=""}}},u=o,c=(s("96bd"),s("2877")),d=Object(c["a"])(u,l,a,!1,null,"18491148",null),p=d.exports;p.install=function(e){e.component(p.name,p)};t["default"]=p},f08a:function(e,t,s){}}]);