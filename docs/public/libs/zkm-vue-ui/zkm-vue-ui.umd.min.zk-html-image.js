(("undefined"!==typeof self?self:this)["webpackJsonpzkm_vue_ui"]=("undefined"!==typeof self?self:this)["webpackJsonpzkm_vue_ui"]||[]).push([[16,38],{"0dac":function(t,e,n){"use strict";n.r(e);n("7f7f");var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"zk-imagehtml-container"},[n("div",{ref:"html",class:["zk-imagehtml-html",{"zk-imagehtml-hide":!t.loading}],style:{width:t.parentWidth&&t.parentWidth+"px",height:t.parentHeight&&t.parentHeight+"px"}},[t._t("default")],2),n("img",{directives:[{name:"show",rawName:"v-show",value:!t.loading,expression:"!loading"}],staticClass:"zk-imagehtml-image",attrs:{src:t.src}})])},a=[],s=n("75fc"),r=(n("551c"),n("34ef"),n("4917"),n("28a5"),n("7867")),o=n("c0e9"),l=n.n(o);function u(t){return t.toDataURL("image/png")}function d(t){var e=t.split(","),n=e[0].match(/:(.*?);/)[1],i=atob(e[1]),a=i.length,s=new Uint8Array(a);while(a--)s[a]=i.charCodeAt(a);return new Blob([s],{type:n})}function c(t){return URL.createObjectURL(t)}var h={name:"ZkHtmlImage",props:["data"],data:function(){return{status:"idle",src:"",parentWidth:void 0,parentHeight:void 0}},computed:{loading:function(){return"idle"!==this.status}},watch:{data:{deep:!0,handler:"update"},loading:function(){this.loading&&this.$el}},methods:{htmlImgLoad:function(){var t=this;return new Promise(function(e,n){var i=0;t.htmlImgLoadTimer=setInterval(function(){return i+=1,t.$refs.html&&!Object(s["a"])(t.$refs.html.querySelectorAll("img")).some(function(t){return!t.complete})?(i=null,clearInterval(t.htmlImgLoadTimer),setTimeout(e,0)):i>=50?(i=null,clearInterval(t.htmlImgLoadTimer),n(new Error("加载图片超时！"))):void 0},0)})},update:function(){var t=this;if(this.$refs.html&&"wait"!==this.status){if("run"!==this.status)return this.status="run",this.updateSrc().then(function(){if("wait"===t.status)return t.status="idle",t.update();t.status="idle"});this.status="wait"}},updateSrc:function(){var t=this;if(this.$refs.html&&!this.__isUpdateSrc)return this.__isUpdateSrc=!0,this.htmlImgLoad().then(function(){return t.parentWidth=t.$refs.html.parentNode.clientWidth,t.parentHeight=t.$refs.html.parentNode.clientHeight,l()(t.$refs.html,{backgroundColor:"#FFFFFF",allowTaint:!1,useCORS:!0,logging:!1})}).then(function(e){var n=u(e);if(t.bata64!==n){t.bata64=n;var i=d(n),a=c(i);t.src=a}},function(){t.src="",Object(r["toast"])("加载失败！")}).then(function(){t.__isUpdateSrc=!1})}},mounted:function(){this.update()},destroyed:function(){clearInterval(this.aaaa),this.loadingInstance&&this.loadingInstance.close(),this.htmlImgLoadTimer&&clearInterval(this.htmlImgLoadTimer)}},m=h,f=(n("8f41"),n("2877")),p=Object(f["a"])(m,i,a,!1,null,"284269f6",null),v=p.exports;v.install=function(t){t.component(v.name,v)};e["default"]=v},"281d":function(t,e,n){},6817:function(t,e,n){"use strict";var i=n("281d"),a=n.n(i);a.a},7867:function(t,e,n){"use strict";n.r(e);n("7f7f");var i=n("8bbf"),a=n.n(i),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("zk-popup-layer",{attrs:{placement:t.placement,"prop-up":!0,modal:!1,"append-to-body":!1,visible:t.visible},on:{transitionend:t.handleTransitionend}},[n("div",{class:["zk-toast","zk-toast-"+t.placement,t.toastClass],style:t.toastStyle},[n("span",{staticClass:"zk-toast-text"},[t._t("default",[t._v(t._s(t.message))])],2)])])},r=[],o=n("2bf3"),l={name:"ZkToast",components:{"zk-popup-layer":o["default"]},props:{message:{type:String,default:"这是一条信息"},visible:{type:Boolean,default:!0},placement:{type:String,default:"center"},toastClass:{},toastStyle:{}},methods:{handleTransitionend:function(t){this.$emit("transitionend",t)}}},u=l,d=(n("6817"),n("2877")),c=Object(d["a"])(u,s,r,!1,null,"0d37450c",null),h=c.exports;n.d(e,"toast",function(){return f}),n.d(e,"Toast",function(){return h}),h.install=function(t){t.component(h.name,h)};var m=a.a.extend({render:function(t){return t(h,{props:{visible:this.visible,message:this.message},on:{transitionend:this.handleTransitionend}})},data:function(){return{visible:!1,message:"这是一条信息",duration:3e3,timer:null}},methods:{handleTransitionend:function(){this.visible||this.destroyElement()},handleClose:function(){this.visible=!1},destroyElement:function(){this.$destroy(!0),this.$el.parentNode.removeChild(this.$el)}},mounted:function(){var t=this;this.visible=!0,this.duration>0&&(this.timer=setTimeout(this.handleClose,this.duration)),setTimeout(function(){return window.addEventListener("click",t.handleClose,!1)},0)},destroyed:function(){clearTimeout(this.timer),window.removeEventListener("click",this.handleClose)}});function f(t){"string"===typeof t&&(t={message:t});var e=new m({data:t});e.$mount(),document.body.appendChild(e.$el)}h.toast=f;e["default"]=h},"8f41":function(t,e,n){"use strict";var i=n("d2b8"),a=n.n(i);a.a},d2b8:function(t,e,n){}}]);