{"version":3,"sources":["webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue?84b5","webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue?07b9","webpack://zk-vue-ui/packages/components/web/image-upload/src/image-upload.vue","webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue?e7a3","webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue","webpack://zk-vue-ui/./packages/components/web/image-upload/index.js","webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue?d492"],"names":["ImageUpload","install","Vue","component","name"],"mappings":";;;;;AAAA,uC;;;;;;;;;;;;;;ACAA,0BAA0B,aAAa,0BAA0B,wBAAwB,iBAAiB,2BAA2B,0CAA0C,EAAE,YAAY,uCAAuC,YAAY,4EAA4E,IAAI,YAAY,8BAA8B,YAAY,+BAA+B,kFAAkF,OAAO,uGAAuG,KAAK,6BAA6B,QAAQ,yCAAyC,YAAY,mBAAmB,uBAAuB,eAAe,mEAAmE,sBAAsB,8BAA8B,sBAAsB;AAC13B;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACkBA;AACA;AAEA;AACA,uBADA;AAEA;AACA;AADA,GAFA;AAKA;AACA,iBADA;AAEA,mBAFA;AAGA,sBAHA;AAIA;AACA,mBADA;AAEA;AAFA,KAJA;AAQA;AACA,mBADA;AAEA;AAFA,KARA;AAYA;AACA,oBADA;AAEA;AAFA;AAZA,GALA;AAsBA,MAtBA,kBAsBA;AACA;AACA,qBADA;AAEA,8BAFA;AAGA,qBAHA;AAIA;AAJA;AAMA,GA7BA;AA8BA;AACA,kBADA,4BACA;AACA,+BACA,kBADA;AAEA;AAJA,GA9BA;AAoCA;AACA,SADA,mBACA;AACA;AACA;AACA,KAJA;AAKA,gBALA,0BAKA;AACA;AACA;AACA;;AACA;AACA;AAVA,GApCA;AAgDA;AACA,cADA,sBACA,IADA,EACA;AAAA;;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AAAA;AAAA,SADA;AAEA;AACA;AACA,SAJA;AAKA;AACA;AACA;AACA;AACA,SATA;AAUA;AACA;AACA;AACA;AACA;AACA;AAfA;AAiBA;AAjCA;AAhDA,G;;ACtBmX,CAAgB,iHAAG,EAAC,C;;;;;;;;ACAhS;AACvC;AACL;AACsC;;;AAGjG;AACmG;AACnG,gBAAgB,8CAAU;AAC1B,EAAE,wCAAM;AACR,EAAE,MAAM;AACR,EAAE,eAAe;AACjB;AACA;AACA;AACA;;AAEA;;AAEe,kE;;;ACnBf;;AAEAA,YAAW,CAACC,OAAZ,GAAsB,UAAUC,GAAV,EAAe;AACnCA,KAAG,CAACC,SAAJ,CAAcH,YAAW,CAACI,IAA1B,EAAgCJ,YAAhC;AACD,CAFD;;AAIeA,kGAAf,E;;;;;;;;ACNA;AAAA;AAAA;AAAulB,CAAgB,8jBAAG,EAAC,C","file":"zk-vue-ui.common.zk-image-upload.js","sourcesContent":["// extracted by mini-css-extract-plugin","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['zk-image-upload', { 'zk-image-upload-loading': _vm.isUpload }]},[_c('div',{staticClass:\"zk-image-upload-progress\"},[_c('div',{staticClass:\"zk-progress\",style:((\"padding-top: \" + _vm.uploadProgress + \"%;\"))},[_c('div',{staticClass:\"zk-progress-bar\"}),_c('div',{staticClass:\"zk-progress-text\"},[_c('span',[_vm._v(_vm._s(_vm.uploadProgress)+\"%\")])])])]),_c('zk-image-select',{attrs:{\"view-src-list\":_vm.viewSrcList,\"options\":_vm.currentOptions,\"readonly\":_vm.readonly,\"cover\":_vm.cover},on:{\"change-file\":_vm.changeFile},model:{value:(_vm.src),callback:function ($$v) {_vm.src=$$v},expression:\"src\"}},[_vm._t(\"label\",null,{\"slot\":\"label\"}),(!_vm.$slots['upload-label'])?_vm._t(\"default\",[_vm._v(\"重新上传\")],{\"slot\":\"select-label\"}):_vm._t(\"upload-label\",null,{\"slot\":\"select-label\"})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :class=\"['zk-image-upload', { 'zk-image-upload-loading': isUpload }]\">\r\n    <div class=\"zk-image-upload-progress\">\r\n      <div class=\"zk-progress\" :style=\"`padding-top: ${ uploadProgress }%;`\">\r\n        <div class=\"zk-progress-bar\"></div>\r\n        <div class=\"zk-progress-text\">\r\n          <span>{{ uploadProgress }}%</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <zk-image-select v-model=\"src\" :view-src-list=\"viewSrcList\" :options=\"currentOptions\" :readonly=\"readonly\" :cover=\"cover\" @change-file=\"changeFile\">\r\n      <slot name=\"label\" slot=\"label\"></slot>\r\n      <slot v-if=\"!$slots['upload-label']\" slot=\"select-label\">重新上传</slot>\r\n      <slot v-else name=\"upload-label\" slot=\"select-label\"></slot>\r\n    </zk-image-select>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ImageSelect from '../../image-select'\r\nimport { message } from '../../message'\r\n\r\nexport default {\r\n  name: 'ZkImageUpload',\r\n  components: {\r\n    'zk-image-select': ImageSelect\r\n  },\r\n  props: {\r\n    value: String,\r\n    options: Object,\r\n    viewSrcList: Array,\r\n    readonly: {\r\n      type: Boolean,\r\n      required: false\r\n    },\r\n    cover: {\r\n      type: Boolean,\r\n      required: false\r\n    },\r\n    httpRequest: {\r\n      type: Function,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      src: this.value,\r\n      currentValue: this.value,\r\n      isUpload: false,\r\n      uploadProgress: 0\r\n    }\r\n  },\r\n  computed: {\r\n    currentOptions () {\r\n      return Object.assign({\r\n      }, this.options || {})\r\n    }\r\n  },\r\n  watch: {\r\n    value () {\r\n      this.src = this.value\r\n      this.currentValue = this.value\r\n    },\r\n    currentValue () {\r\n      if (!this.currentValue) {\r\n        this.$emit('upload-result', undefined)\r\n      }\r\n      this.$emit('input', this.currentValue)\r\n    }\r\n  },\r\n  methods: {\r\n    changeFile (file) {\r\n      function a (f, d, c) {\r\n        return () => setTimeout(() => f(c), d)\r\n      }\r\n\r\n      function b () {}\r\n\r\n      a(b, 200, {})\r\n\r\n      if (!file) {\r\n        this.currentValue = ''\r\n        return\r\n      }\r\n      this.uploadProgress = 0\r\n      this.isUpload = true\r\n      this.httpRequest({\r\n        data: { file },\r\n        onProgress: (e) => {\r\n          this.uploadProgress = ((e.loaded / e.total * 100) | 0)\r\n        },\r\n        onSuccess: result => {\r\n          this.currentValue = result\r\n          this.src = this.currentValue\r\n          this.isUpload = false\r\n        },\r\n        onError: error => {\r\n          this.currentValue = ''\r\n          this.src = ''\r\n          this.isUpload = false\r\n          message.error(String(error) || '图片上传失败，请重试。')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.zk-image-upload {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n.zk-image-upload-progress {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  color: #fff;\r\n  transition: opacity .2s cubic-bezier(.645,.045,.355,1);\r\n  z-index: 1;\r\n  display: none;\r\n  .zk-progress {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    box-sizing: border-box;\r\n    transition: padding-top .2s;\r\n    overflow: hidden;\r\n    .zk-progress-bar {\r\n      width: 100%;\r\n      height: 100%;\r\n      text-align: center;\r\n      padding: 13px;\r\n      background-color: rgba(52, 52, 52, .6);\r\n      box-sizing: border-box;\r\n    }\r\n    .zk-progress-text {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      z-index: 1;\r\n      width: 100%;\r\n      height: 100%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      white-space: nowrap;\r\n    }\r\n  }\r\n}\r\n.zk-image-upload-loading .zk-image-upload-progress {\r\n  display: block;\r\n}\r\n.zk-image-upload-loading /deep/ .zk-image-item-operating {\r\n  display: none !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./image-upload.vue?vue&type=template&id=4c021ee6&scoped=true&\"\nimport script from \"./image-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./image-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./image-upload.vue?vue&type=style&index=0&id=4c021ee6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c021ee6\",\n  null\n  \n)\n\nexport default component.exports","import ImageUpload from './src/image-upload'\r\n\r\nImageUpload.install = function (Vue) {\r\n  Vue.component(ImageUpload.name, ImageUpload)\r\n}\r\n\r\nexport default ImageUpload\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-upload.vue?vue&type=style&index=0&id=4c021ee6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-upload.vue?vue&type=style&index=0&id=4c021ee6&lang=scss&scoped=true&\""],"sourceRoot":""}