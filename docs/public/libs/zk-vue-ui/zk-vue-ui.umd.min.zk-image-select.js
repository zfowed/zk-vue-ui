(("undefined"!==typeof self?self:this)["webpackJsonpzk_vue_ui"]=("undefined"!==typeof self?self:this)["webpackJsonpzk_vue_ui"]||[]).push([[17,19],{"031c":function(e,t,i){},"1ec7":function(e,t,i){"use strict";i.r(t);i("7f7f");var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("zk-popup-layer",{attrs:{visible:e.currentVisible,"custom-style":{width:"100%",height:"100%"}},on:{"update:visible":function(t){e.currentVisible=t}}},[i("div",{staticClass:"image-view-stage"},[i("div",{staticClass:"image-view-close",on:{click:function(t){e.currentVisible=!1}}}),e.currentIndex>0?i("div",{staticClass:"image-view-left",on:{click:e.toLeft}}):e._e(),i("img",{staticClass:"image-view-img",attrs:{src:e.currentSrcList[e.currentIndex]}}),e.currentIndex<e.currentSrcList.length-1?i("div",{staticClass:"image-view-right",on:{click:e.toRight}}):e._e()])])},r=[],s=i("2bf3"),c={name:"ZkImageView",components:{"zk-popup-layer":s["default"]},props:{visible:{type:Boolean,default:!1},src:{type:String,required:!0},srcList:{type:Array}},data:function(){return{currentIndex:Array.isArray(this.srcList)?this.srcList.indexOf(this.src):0}},computed:{currentVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},currentSrcList:function(){return Array.isArray(this.srcList)?this.srcList:[this.src]}},watch:{currentVisible:function(){this.currentVisible&&(this.currentIndex=Array.isArray(this.srcList)?this.srcList.indexOf(this.src):0)},srcList:function(){this.currentIndex=Array.isArray(this.srcList)?this.srcList.indexOf(this.src):0}},methods:{toLeft:function(){this.currentSrcList[this.currentIndex-1]&&(this.currentIndex-=1)},toRight:function(){this.currentSrcList[this.currentIndex+1]&&(this.currentIndex+=1)}}},a=c,l=(i("948a"),i("2877")),u=Object(l["a"])(a,n,r,!1,null,"5b79d62b",null),o=u.exports;o.install=function(e){e.component(o.name,o)};t["default"]=o},4013:function(e,t,i){"use strict";var n=i("031c"),r=i.n(n);r.a},"49bc":function(e,t,i){},7191:function(e,t,i){"use strict";i.r(t);i("7f7f");var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["zk-image-item",{"zk-image-item-add":!e.currentValue,"zk-image-item-readonly":e.readonly,"zk-image-item-cover":e.cover}],style:{width:e.width},attrs:{tabindex:"0"}},[i("div",{staticClass:"zk-image-item-box",style:{"background-image":"url("+e.currentValue+")"},on:{click:function(){return e.currentValue?e.viewImage():e.selectImage()}}},[i("div",{staticClass:"zk-image-item-operating",on:{click:function(t){return t.stopPropagation(),e.selectImage(t)}}},[e._t("select-label",[e._v("重新选择")])],2),i("div",{staticClass:"zk-image-item-notval"},[e._m(0),e.$slots.label?i("div",{staticClass:"zk-image-item-label"},[e._t("label")],2):e._e()])]),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file"}}),e.currentValue?i("zk-image-view",{attrs:{visible:e.imageViewVisible,src:e.currentValue,"src-list":e.currentViewSrcList},on:{"update:visible":function(t){e.imageViewVisible=t}}}):e._e()],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon-plus"},[i("span",{staticClass:"icon-plus-line1"}),i("span",{staticClass:"icon-plus-line2"})])}],s=(i("28a5"),i("75fc")),c=(i("f751"),i("e74d")),a=i("1ec7"),l=i("d92a"),u={name:"ZkImageSelect",components:{"zk-image-view":a["default"]},props:{value:String,options:Object,viewSrcList:{type:Array,default:function(){return[]}},readonly:{type:Boolean,required:!1},cover:{type:Boolean,required:!1},width:{default:"147px"}},data:function(){return{currentValue:this.value,imageViewVisible:!1}},computed:{currentOptions:function(){return Object.assign({maxSize:1048576,minSize:0,limitExt:".jpg,.jpeg,.gif,.png,.bmp"},this.options||{},{accept:"image/*",parseImgBase64:!0,multiple:!1,onError:this.onFileSelectionError,forcedChange:!0})},currentViewSrcList:function(){return this.viewSrcList.indexOf(this.currentValue)<0?[this.currentValue].concat(Object(s["a"])(this.viewSrcList)):this.viewSrcList}},watch:{options:{immediate:!0,handler:"createSelection"},value:function(){this.currentValue=this.value}},methods:{createSelection:function(){return this.fileSelection=new c["a"](this.currentOptions),this.fileSelection},destroyedSelection:function(){this.fileSelection&&(this.fileSelection.destroy(),this.fileSelection=null)},onFileSelectionError:function(e){switch(e.type){case"limitExt":(function(e){var t=e.split(",").map(function(e){return e.substring(1)}).join("，");l["b"].warning("仅支持上传 ".concat(t," 格式的图片！"))})(this.currentOptions.limitExt);break;case"maxSize":(function(e){var t="".concat(e,"字节"),i=e/1024,n=i%1===0&&"".concat(i,"KB")||null,r=i/1024,s=r%1===0&&"".concat(r,"MB")||null;l["b"].warning("图片大小必须小于 ".concat(s||n||t," 以内！"))})(this.currentOptions.maxSize);break;case"minSize":(function(e){var t="".concat(e,"字节"),i=e/1024,n=i%1===0&&"".concat(i,"KB")||null,r=i/1024,s=r%1===0&&"".concat(r,"MB")||null;l["b"].warning("图片大小必须大于 ".concat(s||n||t," 以内！"))})(this.currentOptions.maxSize);break;default:l["b"].error("选择文件出错！")}},selectImage:function(){var e=this;if(!this.readonly)return this.fileSelection.select(function(t){t[0]?(e.currentValue=t[0].base64||void 0,e.$emit("input",e.currentValue),e.$emit("change-file",t[0].file)):e.deleteImage()})},deleteImage:function(){this.currentValue="",this.$emit("input",""),this.$emit("change-file",void 0)},viewImage:function(){this.currentValue&&(this.imageViewVisible=!0)}},destroyed:function(){this.destroyedSelection()}},o=u,f=(i("4013"),i("2877")),m=Object(f["a"])(o,n,r,!1,null,"608a0684",null),d=m.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},"948a":function(e,t,i){"use strict";var n=i("49bc"),r=i.n(n);r.a}}]);
//# sourceMappingURL=zk-vue-ui.umd.min.zk-image-select.js.map