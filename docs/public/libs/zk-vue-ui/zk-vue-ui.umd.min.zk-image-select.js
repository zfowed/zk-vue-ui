<<<<<<< HEAD
(("undefined"!==typeof self?self:this)["webpackJsonpzk_vue_ui"]=("undefined"!==typeof self?self:this)["webpackJsonpzk_vue_ui"]||[]).push([[6,19],{1169:function(e,t,i){var n=i("2d95");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"1ec7":function(e,t,i){"use strict";i.r(t);i("7f7f");var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("zk-popup-layer",{attrs:{visible:e.currentVisible,"custom-style":{width:"100%",height:"100%"}},on:{"update:visible":function(t){e.currentVisible=t}}},[i("div",{staticClass:"image-view"},[i("div",{staticClass:"image-view-close",on:{click:function(t){e.currentVisible=!1}}}),e.isRestart?e._e():i("zk-swiper",{staticClass:"image-swiper",attrs:{options:e.swiperOptions},on:{ready:e.handleReady,slideChange:e.handleSlideChange}},e._l(e.currentSrcList,function(e,t){return i("zk-swiper-slide",{key:t,staticClass:"image-swiper-slide"},[i("div",{staticClass:"image-flex"},[i("img",{attrs:{src:e}})])])}),1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.currentSrcList.length>1,expression:"currentSrcList.length > 1"}]},[i("div",{staticClass:"swiper-pagination"}),i("div",{staticClass:"image-button-prev"}),i("div",{staticClass:"image-button-next"})])],1)])},r=[],a=i("75fc"),s=(i("c5f6"),i("2bf3")),o=i("8e14"),c={name:"ZkImageView",components:{"zk-popup-layer":s["default"],"zk-swiper":o["Swiper"],"zk-swiper-slide":o["SwiperSlide"]},props:{visible:{type:Boolean,default:!1},index:{type:Number},src:{type:String},srcList:{type:Array}},data:function(){return{isRestart:!1,currentIndex:0,swiperOptions:{loop:!0,grabCursor:!0,freeModeSticky:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{prevEl:".image-button-prev",nextEl:".image-button-next"}}}},computed:{currentVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},currentSrcList:function(){return Array.isArray(this.srcList)?Object(a["a"])(this.srcList):[this.src]}},watch:{index:{immediate:!0,handler:function(e){if(this.swiper)return this.swiper.slideTo(e);"number"===typeof e&&this.currentSrcList[e]?this.currentIndex=e:this.currentIndex=this.currentSrcList.indexOf(this.src||this.currentSrcList[0])}}},methods:{handleReady:function(e){this.swiper=e,this.$emit("ready",this.swiper)},handleSlideChange:function(){this.swiper&&(this.currentIndex=this.swiper.activeIndex,this.$emit("update:index",this.currentIndex))}},beforeDestroy:function(){this.$nextTick(function(){this.swiper&&delete this.swiper})}},u=c,l=(i("e3c8"),i("2877")),f=Object(l["a"])(u,n,r,!1,null,"329570b6",null),d=f.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},"26f0":function(e,t,i){"use strict";var n=i("e9a9"),r=i.n(n);r.a},"37c8":function(e,t,i){t.f=i("2b4c")},"3a72":function(e,t,i){var n=i("7726"),r=i("8378"),a=i("2d00"),s=i("37c8"),o=i("86cc").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},"3c1b":function(e,t,i){},"5df3":function(e,t,i){"use strict";var n=i("02f4")(!0);i("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},"67ab":function(e,t,i){var n=i("ca5a")("meta"),r=i("d3f4"),a=i("69a8"),s=i("86cc").f,o=0,c=Object.isExtensible||function(){return!0},u=!i("79e5")(function(){return c(Object.preventExtensions({}))}),l=function(e){s(e,n,{value:{i:"O"+ ++o,w:{}}})},f=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[n].i},d=function(e,t){if(!a(e,n)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[n].w},h=function(e){return u&&p.NEED&&c(e)&&!a(e,n)&&l(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},7191:function(e,t,i){"use strict";i.r(t);i("7f7f");var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["zk-image-item",{"zk-image-item-add":!e.currentValue,"zk-image-item-readonly":e.readonly,"zk-image-item-cover":e.cover}],style:{width:e.width},attrs:{tabindex:"0"}},[i("div",{staticClass:"zk-image-item-box",style:{"background-image":"url("+e.currentValue+")"},on:{click:function(){return e.currentValue?e.viewImage():e.selectImage()}}},[i("div",{staticClass:"zk-image-item-operating",on:{click:function(t){return t.stopPropagation(),e.selectImage(t)}}},[e._t("select-label",[e._v("重新选择")])],2),i("div",{staticClass:"zk-image-item-notval"},[e._m(0),e.$slots.label?i("div",{staticClass:"zk-image-item-label"},[e._t("label")],2):e._e()])]),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file"}}),e.currentValue?i("zk-image-view",{attrs:{visible:e.imageViewVisible,src:e.currentValue,"src-list":e.currentViewSrcList},on:{"update:visible":function(t){e.imageViewVisible=t}}}):e._e()],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon-plus"},[i("span",{staticClass:"icon-plus-line1"}),i("span",{staticClass:"icon-plus-line2"})])}],a=(i("28a5"),i("75fc")),s=(i("f751"),i("e74d")),o=i("8ccb"),c=i("1ec7"),u=i("d92a"),l={name:"ZkImageSelect",mixins:[o["c"]],components:{"zk-image-view":c["default"]},props:{options:Object,viewSrcList:{type:Array,default:function(){return[]}},readonly:{type:Boolean,required:!1},cover:{type:Boolean,required:!1},width:{default:"147px"}},data:function(){return{imageViewVisible:!1}},computed:{currentOptions:function(){return Object.assign({maxSize:1048576,minSize:0,limitExt:".jpg,.jpeg,.gif,.png,.bmp"},this.options||{},{accept:"image/*",parseImgBase64:!0,multiple:!1,onError:this.onFileSelectionError,forcedChange:!0})},currentViewSrcList:function(){return this.viewSrcList.indexOf(this.currentValue)<0?[this.currentValue].concat(Object(a["a"])(this.viewSrcList)):this.viewSrcList}},watch:{options:{immediate:!0,handler:"createSelection"},value:function(){this.currentValue=this.value}},methods:{createSelection:function(){return this.fileSelection=new s["a"](this.currentOptions),this.fileSelection},destroyedSelection:function(){this.fileSelection&&(this.fileSelection.destroy(),this.fileSelection=null)},onFileSelectionError:function(e){switch(e.type){case"limitExt":(function(e){var t=e.split(",").map(function(e){return e.substring(1)}).join("，");u["b"].warning("仅支持上传 ".concat(t," 格式的图片！"))})(this.currentOptions.limitExt);break;case"maxSize":(function(e){var t="".concat(e,"字节"),i=e/1024,n=i%1===0&&"".concat(i,"KB")||null,r=i/1024,a=r%1===0&&"".concat(r,"MB")||null;u["b"].warning("图片大小必须小于 ".concat(a||n||t," 以内！"))})(this.currentOptions.maxSize);break;case"minSize":(function(e){var t="".concat(e,"字节"),i=e/1024,n=i%1===0&&"".concat(i,"KB")||null,r=i/1024,a=r%1===0&&"".concat(r,"MB")||null;u["b"].warning("图片大小必须大于 ".concat(a||n||t," 以内！"))})(this.currentOptions.maxSize);break;default:u["b"].error("选择文件出错！")}},selectImage:function(){var e=this;if(!this.readonly)return this.fileSelection.select(function(t){t[0]?(e.currentValue=t[0].base64||void 0,e.$emit("change-file",t[0].file)):e.deleteImage()})},deleteImage:function(){this.currentValue="",this.$emit("change-file",void 0)},viewImage:function(){this.currentValue&&(this.imageViewVisible=!0)}},destroyed:function(){this.destroyedSelection()}},f=l,d=(i("26f0"),i("2877")),h=Object(d["a"])(f,n,r,!1,null,"3544ef9c",null),p=h.exports;p.install=function(e){e.component(p.name,p)};t["default"]=p},"7bbc":function(e,t,i){var n=i("6821"),r=i("9093").f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return r(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?o(e):r(n(e))}},8615:function(e,t,i){var n=i("5ca1"),r=i("504c")(!1);n(n.S,"Object",{values:function(e){return r(e)}})},"8a81":function(e,t,i){"use strict";var n=i("7726"),r=i("69a8"),a=i("9e1e"),s=i("5ca1"),o=i("2aba"),c=i("67ab").KEY,u=i("79e5"),l=i("5537"),f=i("7f20"),d=i("ca5a"),h=i("2b4c"),p=i("37c8"),m=i("3a72"),v=i("d4c0"),b=i("1169"),g=i("cb7c"),y=i("d3f4"),w=i("6821"),S=i("6a99"),k=i("4630"),F=i("2aeb"),z=i("7bbc"),O=i("11e9"),x=i("86cc"),V=i("0d58"),I=O.f,j=x.f,_=z.f,$=n.Symbol,E=n.JSON,C=E&&E.stringify,L="prototype",P=h("_hidden"),N=h("toPrimitive"),A={}.propertyIsEnumerable,B=l("symbol-registry"),q=l("symbols"),M=l("op-symbols"),R=Object[L],Z="function"==typeof $,T=n.QObject,D=!T||!T[L]||!T[L].findChild,J=a&&u(function(){return 7!=F(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(e,t,i){var n=I(R,t);n&&delete R[t],j(e,t,i),n&&e!==R&&j(R,t,n)}:j,K=function(e){var t=q[e]=F($[L]);return t._k=e,t},W=Z&&"symbol"==typeof $.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof $},Y=function(e,t,i){return e===R&&Y(M,t,i),g(e),t=S(t,!0),g(i),r(q,t)?(i.enumerable?(r(e,P)&&e[P][t]&&(e[P][t]=!1),i=F(i,{enumerable:k(0,!1)})):(r(e,P)||j(e,P,k(1,{})),e[P][t]=!0),J(e,t,i)):j(e,t,i)},G=function(e,t){g(e);var i,n=v(t=w(t)),r=0,a=n.length;while(a>r)Y(e,i=n[r++],t[i]);return e},H=function(e,t){return void 0===t?F(e):G(F(e),t)},Q=function(e){var t=A.call(this,e=S(e,!0));return!(this===R&&r(q,e)&&!r(M,e))&&(!(t||!r(this,e)||!r(q,e)||r(this,P)&&this[P][e])||t)},U=function(e,t){if(e=w(e),t=S(t,!0),e!==R||!r(q,t)||r(M,t)){var i=I(e,t);return!i||!r(q,t)||r(e,P)&&e[P][t]||(i.enumerable=!0),i}},X=function(e){var t,i=_(w(e)),n=[],a=0;while(i.length>a)r(q,t=i[a++])||t==P||t==c||n.push(t);return n},ee=function(e){var t,i=e===R,n=_(i?M:w(e)),a=[],s=0;while(n.length>s)!r(q,t=n[s++])||i&&!r(R,t)||a.push(q[t]);return a};Z||($=function(){if(this instanceof $)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(i){this===R&&t.call(M,i),r(this,P)&&r(this[P],e)&&(this[P][e]=!1),J(this,e,k(1,i))};return a&&D&&J(R,e,{configurable:!0,set:t}),K(e)},o($[L],"toString",function(){return this._k}),O.f=U,x.f=Y,i("9093").f=z.f=X,i("52a7").f=Q,i("2621").f=ee,a&&!i("2d00")&&o(R,"propertyIsEnumerable",Q,!0),p.f=function(e){return K(h(e))}),s(s.G+s.W+s.F*!Z,{Symbol:$});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;te.length>ie;)h(te[ie++]);for(var ne=V(h.store),re=0;ne.length>re;)m(ne[re++]);s(s.S+s.F*!Z,"Symbol",{for:function(e){return r(B,e+="")?B[e]:B[e]=$(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in B)if(B[t]===e)return t},useSetter:function(){D=!0},useSimple:function(){D=!1}}),s(s.S+s.F*!Z,"Object",{create:H,defineProperty:Y,defineProperties:G,getOwnPropertyDescriptor:U,getOwnPropertyNames:X,getOwnPropertySymbols:ee}),E&&s(s.S+s.F*(!Z||u(function(){var e=$();return"[null]"!=C([e])||"{}"!=C({a:e})||"{}"!=C(Object(e))})),"JSON",{stringify:function(e){var t,i,n=[e],r=1;while(arguments.length>r)n.push(arguments[r++]);if(i=t=n[1],(y(t)||void 0!==e)&&!W(e))return b(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!W(t))return t}),n[1]=t,C.apply(E,n)}}),$[L][N]||i("32e9")($[L],N,$[L].valueOf),f($,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},"8ccb":function(e,t,i){"use strict";i("ac4d"),i("8a81"),i("5df3"),i("ac6a"),i("cadf"),i("8615");var n=i("75fc"),r=(i("551c"),{componentName:"ZkForm",props:{model:{type:Object},rules:{type:Object},disabled:{type:Boolean,default:!1}},provide:function(){return{zkForm:this}},data:function(){return{fieldInstanceList:[]}},methods:{onAddFieldInstance:function(e){this.fieldInstanceList.push(e)},onRemoveFieldInstance:function(e){var t=this.fieldInstanceList.indexOf(e);t<0||this.fieldInstanceList.splice(t,1)},validate:function(e){var t=this,i=function(e){return new Promise(function(t,i){return e.validate(void 0,function(e,i){var r;return t((r=[]).concat.apply(r,Object(n["a"])(Object.values(i||{}))))})})},r=function(r,a){return Promise.all(t.fieldInstanceList.map(function(e){return i(e)})).then(function(t){var i,s=(i=[]).concat.apply(i,Object(n["a"])(t)),o=!!s.length;return e&&e(o,s),o?a&&a(o):r&&r(o)})};return e?r():new Promise(r)},clearValidate:function(){var e=!0,t=!1,i=void 0;try{for(var n,r=this.fieldInstanceList[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var a=n.value;a.clearValidate()}}catch(s){t=!0,i=s}finally{try{e||null==r.return||r.return()}finally{if(t)throw i}}}},created:function(){this.$on("zk.form.addFieldInstance",this.onAddFieldInstance),this.$on("zk.form.removeFieldInstance",this.onRemoveFieldInstance)}}),a=(i("a481"),i("28a5"),i("e74d")),s=i("cb7e"),o=Symbol("value"),c={componentName:"ZkFormItem",mixins:[s["a"]],inject:{zkForm:{default:void 0}},props:{prop:{type:String,default:""},props:{type:Array},value:{default:o},rules:{type:[Object,Array]},required:{type:Boolean,default:void 0}},provide:function(){return{zkFormItem:this}},data:function(){return{validateState:"",validateMessage:"",currentRequired:!1}},computed:{currentProps:function(){return this.value!==o?["value"]:this.props||this.prop&&[this.prop]||[]}},methods:{pathToArray:function(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")},getValidateParams:function(){var e=this.value!==o?{value:this.value}:this.zkForm&&this.zkForm.model||{},t=this.zkForm&&this.zkForm.rules||{},i=t,n=this.rules,r=void 0!==this.required?{required:!!this.required}:[],s={},c=this.currentProps,u={};this.currentRequired=!1;var l=!0,f=!1,d=void 0;try{for(var h,p=c[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value;if(m){for(var v=this.pathToArray(m),b=s,g=i,y=0;y<v.length;y++){var w=v[y];if(g&&(g=g[w]||null),y<v.length-1)b[w]={type:"object",required:!0,fields:{}},b=b[w].fields;else{var S=[].concat(n||g||[]).concat(r);S.length&&(b[w]=S),this.currentRequired=S.some(function(e){return e.required})}}Object(a["d"])(u,m,Object(a["c"])(e,m))}}}catch(k){f=!0,d=k}finally{try{l||null==p.return||p.return()}finally{if(f)throw d}}return{model:u,descriptor:s}},validate:function(e,t){var i=this,n=function(e){i.$nextTick(function(){var n=i.getValidateParams(),r=n.model,s=n.descriptor;Object(a["e"])(r,s,{},function(n,r){return i.validateState=n?"error":"success",i.validateMessage=n&&n[0]&&n[0].message||"",t&&t(i.validateMessage,r),e&&e(!!n)})})};return t?n():new Promise(n)},clearValidate:function(){this.validateState="",this.validateMessage=""},onFieldFocus:function(){},onFieldBlur:function(){return this.validate("blur")},onFieldChange:function(){return this.validate("change")}},mounted:function(){this.getValidateParams(),this.currentProps.length&&(this.dispatch("ZkForm","zk.form.addFieldInstance",[this]),this.$on("zk.form.blur",this.onFieldBlur),this.$on("zk.form.focus",this.onFieldFocus),this.$on("zk.form.change",this.onFieldChange))},beforeDestroy:function(){this.currentProps.length&&this.dispatch("ZkForm","zk.form.removeFieldInstance",[this])}},u={mixins:[s["a"]],inject:{zkForm:{default:void 0},zkFormItem:{default:void 0}},props:{value:{},disabled:Boolean,disabledFormValidate:Boolean},data:function(){return{currentValue:this.value}},computed:{currentDisabled:function(){return this.disabled||(this.zkForm||{}).disabled}},watch:{value:function(){this.currentValue=this.value},currentValue:function(){if(this.$emit("input",this.currentValue),!this.disabledFormValidate)return this.dispatch("ZkFormItem","zk.form.change",[this.currentValue])}},methods:{handleFormFocus:function(e){this.disabledFormValidate||this.dispatch("ZkFormItem","zk.form.focus",[this.currentValue])},handleFormBlur:function(e){this.disabledFormValidate||this.dispatch("ZkFormItem","zk.form.blur",[this.currentValue])}}};i.d(t,"a",function(){return r}),i.d(t,"b",function(){return c}),i.d(t,"c",function(){return u})},ac4d:function(e,t,i){i("3a72")("asyncIterator")},cb7e:function(e,t,i){"use strict";i("ac6a");function n(e,t,i){this.$children.forEach(function(r){var a=r.$options.componentName;a===e?r.$emit.apply(r,[t].concat(i)):n.apply(r,[e,t].concat([i]))})}t["a"]={methods:{dispatch:function(e,t,i){var n=this.$parent||this.$root,r=n.$options.componentName;while(n&&(!r||r!==e))n=n.$parent,n&&(r=n.$options.componentName);n&&n.$emit.apply(n,[t].concat(i))},broadcast:function(e,t,i){n.call(this,e,t,i)}}}},d4c0:function(e,t,i){var n=i("0d58"),r=i("2621"),a=i("52a7");e.exports=function(e){var t=n(e),i=r.f;if(i){var s,o=i(e),c=a.f,u=0;while(o.length>u)c.call(e,s=o[u++])&&t.push(s)}return t}},e3c8:function(e,t,i){"use strict";var n=i("3c1b"),r=i.n(n);r.a},e9a9:function(e,t,i){}}]);
=======
(("undefined"!==typeof self?self:this)["webpackJsonpzk_vue_ui"]=("undefined"!==typeof self?self:this)["webpackJsonpzk_vue_ui"]||[]).push([[5,19],{1169:function(t,e,i){var n=i("2d95");t.exports=Array.isArray||function(t){return"Array"==n(t)}},"1ec7":function(t,e,i){"use strict";i.r(e);i("7f7f");var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("zk-popup-layer",{attrs:{visible:t.currentVisible,"custom-style":{width:"100%",height:"100%"}},on:{"update:visible":function(e){t.currentVisible=e}}},[i("div",{staticClass:"image-view-stage"},[i("div",{staticClass:"image-view-close",on:{click:function(e){t.currentVisible=!1}}}),t.currentIndex>0?i("div",{staticClass:"image-view-left",on:{click:t.toLeft}}):t._e(),i("img",{staticClass:"image-view-img",attrs:{src:t.currentSrcList[t.currentIndex]}}),t.currentIndex<t.currentSrcList.length-1?i("div",{staticClass:"image-view-right",on:{click:t.toRight}}):t._e()])])},r=[],a=i("2bf3"),c={name:"ZkImageView",components:{"zk-popup-layer":a["default"]},props:{visible:{type:Boolean,default:!1},src:{type:String,required:!0},srcList:{type:Array}},data:function(){return{currentIndex:Array.isArray(this.srcList)?this.srcList.indexOf(this.src):0}},computed:{currentVisible:{get:function(){return this.visible},set:function(t){this.$emit("update:visible",t)}},currentSrcList:function(){return Array.isArray(this.srcList)?this.srcList:[this.src]}},watch:{currentVisible:function(){this.currentVisible&&(this.currentIndex=Array.isArray(this.srcList)?this.srcList.indexOf(this.src):0)},srcList:function(){this.currentIndex=Array.isArray(this.srcList)?this.srcList.indexOf(this.src):0}},methods:{toLeft:function(){this.currentSrcList[this.currentIndex-1]&&(this.currentIndex-=1)},toRight:function(){this.currentSrcList[this.currentIndex+1]&&(this.currentIndex+=1)}}},o=c,s=(i("948a"),i("2877")),u=Object(s["a"])(o,n,r,!1,null,"5b79d62b",null),l=u.exports;l.install=function(t){t.component(l.name,l)};e["default"]=l},"37c8":function(t,e,i){e.f=i("2b4c")},"3a72":function(t,e,i){var n=i("7726"),r=i("8378"),a=i("2d00"),c=i("37c8"),o=i("86cc").f;t.exports=function(t){var e=r.Symbol||(r.Symbol=a?{}:n.Symbol||{});"_"==t.charAt(0)||t in e||o(e,t,{value:c.f(t)})}},"49bc":function(t,e,i){},"5df3":function(t,e,i){"use strict";var n=i("02f4")(!0);i("01f9")(String,"String",function(t){this._t=String(t),this._i=0},function(){var t,e=this._t,i=this._i;return i>=e.length?{value:void 0,done:!0}:(t=n(e,i),this._i+=t.length,{value:t,done:!1})})},"67ab":function(t,e,i){var n=i("ca5a")("meta"),r=i("d3f4"),a=i("69a8"),c=i("86cc").f,o=0,s=Object.isExtensible||function(){return!0},u=!i("79e5")(function(){return s(Object.preventExtensions({}))}),l=function(t){c(t,n,{value:{i:"O"+ ++o,w:{}}})},f=function(t,e){if(!r(t))return"symbol"==typeof t?t:("string"==typeof t?"S":"P")+t;if(!a(t,n)){if(!s(t))return"F";if(!e)return"E";l(t)}return t[n].i},d=function(t,e){if(!a(t,n)){if(!s(t))return!0;if(!e)return!1;l(t)}return t[n].w},h=function(t){return u&&m.NEED&&s(t)&&!a(t,n)&&l(t),t},m=t.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},7191:function(t,e,i){"use strict";i.r(e);i("7f7f");var n=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{class:["zk-image-item",{"zk-image-item-add":!t.currentValue,"zk-image-item-readonly":t.readonly,"zk-image-item-cover":t.cover}],style:{width:t.width},attrs:{tabindex:"0"}},[i("div",{staticClass:"zk-image-item-box",style:{"background-image":"url("+t.currentValue+")"},on:{click:function(){return t.currentValue?t.viewImage():t.selectImage()}}},[i("div",{staticClass:"zk-image-item-operating",on:{click:function(e){return e.stopPropagation(),t.selectImage(e)}}},[t._t("select-label",[t._v("重新选择")])],2),i("div",{staticClass:"zk-image-item-notval"},[t._m(0),t.$slots.label?i("div",{staticClass:"zk-image-item-label"},[t._t("label")],2):t._e()])]),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file"}}),t.currentValue?i("zk-image-view",{attrs:{visible:t.imageViewVisible,src:t.currentValue,"src-list":t.currentViewSrcList},on:{"update:visible":function(e){t.imageViewVisible=e}}}):t._e()],1)},r=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"icon-plus"},[i("span",{staticClass:"icon-plus-line1"}),i("span",{staticClass:"icon-plus-line2"})])}],a=(i("28a5"),i("75fc")),c=(i("f751"),i("e74d")),o=i("8ccb"),s=i("1ec7"),u=i("c440"),l=u["a"].msgbox,f={name:"ZkImageSelect",mixins:[o["c"]],components:{"zk-image-view":s["default"]},props:{options:Object,viewSrcList:{type:Array,default:function(){return[]}},readonly:{type:Boolean,required:!1},cover:{type:Boolean,required:!1},width:{default:"147px"}},data:function(){return{imageViewVisible:!1}},computed:{currentOptions:function(){return Object.assign({maxSize:1048576,minSize:0,limitExt:".jpg,.jpeg,.gif,.png,.bmp"},this.options||{},{accept:"image/*",parseImgBase64:!0,multiple:!1,onError:this.onFileSelectionError,forcedChange:!0})},currentViewSrcList:function(){return this.viewSrcList.indexOf(this.currentValue)<0?[this.currentValue].concat(Object(a["a"])(this.viewSrcList)):this.viewSrcList}},watch:{options:{immediate:!0,handler:"createSelection"},value:function(){this.currentValue=this.value}},methods:{createSelection:function(){return this.fileSelection=new c["a"](this.currentOptions),this.fileSelection},destroyedSelection:function(){this.fileSelection&&(this.fileSelection.destroy(),this.fileSelection=null)},onFileSelectionError:function(t){var e=this;switch(t.type){case"limitExt":(function(t){var i=t.split(",").map(function(t){return t.substring(1)}).join("，");l.alert("仅支持上传 ".concat(i," 格式的图片！"),"提示",{closeOnClickModal:!0,confirmButtonText:"重新选择",callback:function(t){if("confirm"===t)return e.selectImage()}})})(this.currentOptions.limitExt);break;case"maxSize":(function(t){var i="".concat(t,"字节"),n=t/1024,r=n%1===0&&"".concat(n,"KB")||null,a=n/1024,c=a%1===0&&"".concat(a,"MB")||null;l.alert("图片大小必须小于 ".concat(c||r||i," 以内！"),"提示",{closeOnClickModal:!0,confirmButtonText:"重新选择",callback:function(t){if("confirm"===t)return e.selectImage()}})})(this.currentOptions.maxSize);break;case"minSize":(function(t){var i="".concat(t,"字节"),n=t/1024,r=n%1===0&&"".concat(n,"KB")||null,a=n/1024,c=a%1===0&&"".concat(a,"MB")||null;l.alert("图片大小必须大于 ".concat(c||r||i," 以内！"),"提示",{closeOnClickModal:!0,confirmButtonText:"重新选择",callback:function(t){if("confirm"===t)return e.selectImage()}})})(this.currentOptions.maxSize);break;default:l.alert("选择文件出错！","提示",{closeOnClickModal:!0,confirmButtonText:"重新选择",callback:function(t){if("confirm"===t)return e.selectImage()}})}},selectImage:function(){var t=this;if(!this.readonly)return this.fileSelection.select(function(e){e[0]?(t.currentValue=e[0].base64||void 0,t.$emit("change-file",e[0].file)):t.deleteImage()})},deleteImage:function(){this.currentValue="",this.$emit("change-file",void 0)},viewImage:function(){this.currentValue&&(this.imageViewVisible=!0)}},destroyed:function(){this.destroyedSelection()}},d=f,h=(i("bd5f"),i("2877")),m=Object(h["a"])(d,n,r,!1,null,"e17dbbf2",null),p=m.exports;p.install=function(t){t.component(p.name,p)};e["default"]=p},"7bbc":function(t,e,i){var n=i("6821"),r=i("9093").f,a={}.toString,c="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(t){try{return r(t)}catch(e){return c.slice()}};t.exports.f=function(t){return c&&"[object Window]"==a.call(t)?o(t):r(n(t))}},8615:function(t,e,i){var n=i("5ca1"),r=i("504c")(!1);n(n.S,"Object",{values:function(t){return r(t)}})},"8a81":function(t,e,i){"use strict";var n=i("7726"),r=i("69a8"),a=i("9e1e"),c=i("5ca1"),o=i("2aba"),s=i("67ab").KEY,u=i("79e5"),l=i("5537"),f=i("7f20"),d=i("ca5a"),h=i("2b4c"),m=i("37c8"),p=i("3a72"),v=i("d4c0"),b=i("1169"),g=i("cb7c"),y=i("d3f4"),k=i("6821"),S=i("6a99"),w=i("4630"),F=i("2aeb"),I=i("7bbc"),O=i("11e9"),x=i("86cc"),V=i("0d58"),z=O.f,j=x.f,L=I.f,_=n.Symbol,E=n.JSON,$=E&&E.stringify,A="prototype",P=h("_hidden"),C=h("toPrimitive"),B={}.propertyIsEnumerable,N=l("symbol-registry"),q=l("symbols"),M=l("op-symbols"),T=Object[A],Z="function"==typeof _,R=n.QObject,J=!R||!R[A]||!R[A].findChild,D=a&&u(function(){return 7!=F(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(t,e,i){var n=z(T,e);n&&delete T[e],j(t,e,i),n&&t!==T&&j(T,e,n)}:j,K=function(t){var e=q[t]=F(_[A]);return e._k=t,e},W=Z&&"symbol"==typeof _.iterator?function(t){return"symbol"==typeof t}:function(t){return t instanceof _},Y=function(t,e,i){return t===T&&Y(M,e,i),g(t),e=S(e,!0),g(i),r(q,e)?(i.enumerable?(r(t,P)&&t[P][e]&&(t[P][e]=!1),i=F(i,{enumerable:w(0,!1)})):(r(t,P)||j(t,P,w(1,{})),t[P][e]=!0),D(t,e,i)):j(t,e,i)},G=function(t,e){g(t);var i,n=v(e=k(e)),r=0,a=n.length;while(a>r)Y(t,i=n[r++],e[i]);return t},Q=function(t,e){return void 0===e?F(t):G(F(t),e)},H=function(t){var e=B.call(this,t=S(t,!0));return!(this===T&&r(q,t)&&!r(M,t))&&(!(e||!r(this,t)||!r(q,t)||r(this,P)&&this[P][t])||e)},U=function(t,e){if(t=k(t),e=S(e,!0),t!==T||!r(q,e)||r(M,e)){var i=z(t,e);return!i||!r(q,e)||r(t,P)&&t[P][e]||(i.enumerable=!0),i}},X=function(t){var e,i=L(k(t)),n=[],a=0;while(i.length>a)r(q,e=i[a++])||e==P||e==s||n.push(e);return n},tt=function(t){var e,i=t===T,n=L(i?M:k(t)),a=[],c=0;while(n.length>c)!r(q,e=n[c++])||i&&!r(T,e)||a.push(q[e]);return a};Z||(_=function(){if(this instanceof _)throw TypeError("Symbol is not a constructor!");var t=d(arguments.length>0?arguments[0]:void 0),e=function(i){this===T&&e.call(M,i),r(this,P)&&r(this[P],t)&&(this[P][t]=!1),D(this,t,w(1,i))};return a&&J&&D(T,t,{configurable:!0,set:e}),K(t)},o(_[A],"toString",function(){return this._k}),O.f=U,x.f=Y,i("9093").f=I.f=X,i("52a7").f=H,i("2621").f=tt,a&&!i("2d00")&&o(T,"propertyIsEnumerable",H,!0),m.f=function(t){return K(h(t))}),c(c.G+c.W+c.F*!Z,{Symbol:_});for(var et="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),it=0;et.length>it;)h(et[it++]);for(var nt=V(h.store),rt=0;nt.length>rt;)p(nt[rt++]);c(c.S+c.F*!Z,"Symbol",{for:function(t){return r(N,t+="")?N[t]:N[t]=_(t)},keyFor:function(t){if(!W(t))throw TypeError(t+" is not a symbol!");for(var e in N)if(N[e]===t)return e},useSetter:function(){J=!0},useSimple:function(){J=!1}}),c(c.S+c.F*!Z,"Object",{create:Q,defineProperty:Y,defineProperties:G,getOwnPropertyDescriptor:U,getOwnPropertyNames:X,getOwnPropertySymbols:tt}),E&&c(c.S+c.F*(!Z||u(function(){var t=_();return"[null]"!=$([t])||"{}"!=$({a:t})||"{}"!=$(Object(t))})),"JSON",{stringify:function(t){var e,i,n=[t],r=1;while(arguments.length>r)n.push(arguments[r++]);if(i=e=n[1],(y(e)||void 0!==t)&&!W(t))return b(e)||(e=function(t,e){if("function"==typeof i&&(e=i.call(this,t,e)),!W(e))return e}),n[1]=e,$.apply(E,n)}}),_[A][C]||i("32e9")(_[A],C,_[A].valueOf),f(_,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},"8ccb":function(t,e,i){"use strict";i("ac4d"),i("8a81"),i("5df3"),i("ac6a"),i("cadf"),i("8615");var n=i("75fc"),r=(i("551c"),{componentName:"ZkForm",props:{model:{type:Object},rules:{type:Object},disabled:{type:Boolean,default:!1}},provide:function(){return{zkForm:this}},data:function(){return{fieldInstanceList:[]}},methods:{onAddFieldInstance:function(t){this.fieldInstanceList.push(t)},onRemoveFieldInstance:function(t){var e=this.fieldInstanceList.indexOf(t);e<0||this.fieldInstanceList.splice(e,1)},validate:function(t){var e=this,i=function(t){return new Promise(function(e,i){return t.validate(void 0,function(t,i){var r;return e((r=[]).concat.apply(r,Object(n["a"])(Object.values(i||{}))))})})},r=function(r,a){return Promise.all(e.fieldInstanceList.map(function(t){return i(t)})).then(function(e){var i,c=(i=[]).concat.apply(i,Object(n["a"])(e)),o=!!c.length;return t&&t(o,c),o?a&&a(o):r&&r(o)})};return t?r():new Promise(r)},clearValidate:function(){var t=!0,e=!1,i=void 0;try{for(var n,r=this.fieldInstanceList[Symbol.iterator]();!(t=(n=r.next()).done);t=!0){var a=n.value;a.clearValidate()}}catch(c){e=!0,i=c}finally{try{t||null==r.return||r.return()}finally{if(e)throw i}}}},created:function(){this.$on("zk.form.addFieldInstance",this.onAddFieldInstance),this.$on("zk.form.removeFieldInstance",this.onRemoveFieldInstance)}}),a=(i("a481"),i("28a5"),i("e74d")),c=i("cb7e"),o=Symbol("value"),s={componentName:"ZkFormItem",mixins:[c["a"]],inject:{zkForm:{default:void 0}},props:{prop:{type:String,default:""},props:{type:Array},value:{default:o},rules:{type:[Object,Array]},required:{type:Boolean,default:void 0}},provide:function(){return{zkFormItem:this}},data:function(){return{validateState:"",validateMessage:"",currentRequired:this.required}},computed:{currentProps:function(){return this.value!==o?["value"]:this.props||this.prop&&[this.prop]||[]}},methods:{pathToArray:function(t){return Array.isArray(t)?t:t.replace(/\[/g,".").replace(/\]/g,"").split(".")},getValidateParams:function(){var t=this.value!==o?{value:this.value}:this.zkForm&&this.zkForm.model||{},e=this.zkForm&&this.zkForm.rules||{},i=e,n=this.rules,r=void 0!==this.required?{required:!!this.required}:[],c={},s=this.currentProps,u={};this.currentRequired=this.required;var l=!0,f=!1,d=void 0;try{for(var h,m=s[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var p=h.value;if(p){for(var v=this.pathToArray(p),b=c,g=i,y=0;y<v.length;y++){var k=v[y];if(g&&(g=g[k]||null),y<v.length-1)b[k]={type:"object",required:!0,fields:{}},b=b[k].fields;else{var S=[].concat(n||g||[]).concat(r);S.length&&(b[k]=S),this.currentRequired=S.some(function(t){return t.required})}}Object(a["d"])(u,p,Object(a["c"])(t,p))}}}catch(w){f=!0,d=w}finally{try{l||null==m.return||m.return()}finally{if(f)throw d}}return{model:u,descriptor:c}},validate:function(t,e){var i=this,n=function(t){i.$nextTick(function(){var n=i.getValidateParams(),r=n.model,c=n.descriptor;Object(a["e"])(r,c,{},function(n,r){return i.validateState=n?"error":"success",i.validateMessage=n&&n[0]&&n[0].message||"",e&&e(i.validateMessage,r),t&&t(!!n)})})};return e?n():new Promise(n)},clearValidate:function(){this.validateState="",this.validateMessage=""},onFieldFocus:function(){},onFieldBlur:function(){return this.validate("blur")},onFieldChange:function(){return this.validate("change")}},mounted:function(){this.getValidateParams(),this.currentProps.length&&(this.dispatch("ZkForm","zk.form.addFieldInstance",[this]),this.$on("zk.form.blur",this.onFieldBlur),this.$on("zk.form.focus",this.onFieldFocus),this.$on("zk.form.change",this.onFieldChange))},beforeDestroy:function(){this.currentProps.length&&this.dispatch("ZkForm","zk.form.removeFieldInstance",[this])}},u={mixins:[c["a"]],inject:{zkForm:{default:void 0},zkFormItem:{default:void 0}},props:{value:{},disabled:Boolean,disabledFormValidate:Boolean},data:function(){return{currentValue:this.value}},computed:{currentDisabled:function(){return this.disabled||(this.zkForm||{}).disabled}},watch:{value:function(){this.currentValue=this.value},currentValue:function(){if(this.$emit("input",this.currentValue),!this.disabledFormValidate)return this.dispatch("ZkFormItem","zk.form.change",[this.currentValue])}},methods:{handleFormFocus:function(t){this.disabledFormValidate||this.dispatch("ZkFormItem","zk.form.focus",[this.currentValue])},handleFormBlur:function(t){this.disabledFormValidate||this.dispatch("ZkFormItem","zk.form.blur",[this.currentValue])}}};i.d(e,"a",function(){return r}),i.d(e,"b",function(){return s}),i.d(e,"c",function(){return u})},"948a":function(t,e,i){"use strict";var n=i("49bc"),r=i.n(n);r.a},ac4d:function(t,e,i){i("3a72")("asyncIterator")},bd5f:function(t,e,i){"use strict";var n=i("ee32"),r=i.n(n);r.a},cb7e:function(t,e,i){"use strict";i("ac6a");function n(t,e,i){this.$children.forEach(function(r){var a=r.$options.componentName;a===t?r.$emit.apply(r,[e].concat(i)):n.apply(r,[t,e].concat([i]))})}e["a"]={methods:{dispatch:function(t,e,i){var n=this.$parent||this.$root,r=n.$options.componentName;while(n&&(!r||r!==t))n=n.$parent,n&&(r=n.$options.componentName);n&&n.$emit.apply(n,[e].concat(i))},broadcast:function(t,e,i){n.call(this,t,e,i)}}}},d4c0:function(t,e,i){var n=i("0d58"),r=i("2621"),a=i("52a7");t.exports=function(t){var e=n(t),i=r.f;if(i){var c,o=i(t),s=a.f,u=0;while(o.length>u)s.call(t,c=o[u++])&&e.push(c)}return e}},ee32:function(t,e,i){}}]);
>>>>>>> 2a99a08700e0bd9a549daff1b32d928bf3357469
//# sourceMappingURL=zk-vue-ui.umd.min.zk-image-select.js.map