(("undefined"!==typeof self?self:this)["webpackJsonpzkm_vue_ui"]=("undefined"!==typeof self?self:this)["webpackJsonpzkm_vue_ui"]||[]).push([[6,19],{1169:function(e,t,i){var n=i("2d95");e.exports=Array.isArray||function(e){return"Array"==n(e)}},"1ec7":function(e,t,i){"use strict";i.r(t);i("7f7f");var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("zk-popup-layer",{attrs:{visible:e.currentVisible,"custom-style":{width:"100%",height:"100%"}},on:{"update:visible":function(t){e.currentVisible=t}}},[e.visible?i("div",{staticClass:"image-view"},[i("div",{staticClass:"image-view-close",on:{click:function(t){e.currentVisible=!1}}}),e.isRestart?e._e():i("zk-swiper",{staticClass:"image-swiper",attrs:{options:e.swiperOptions},on:{ready:e.handleReady,slideChange:e.handleSlideChange}},e._l(e.currentSrcList,function(e,t){return i("zk-swiper-slide",{key:t,staticClass:"image-swiper-slide"},[i("div",{staticClass:"image-flex"},[i("img",{attrs:{src:e}})])])}),1),i("div",{directives:[{name:"show",rawName:"v-show",value:e.currentSrcList.length>1,expression:"currentSrcList.length > 1"}]},[i("div",{staticClass:"swiper-pagination"}),i("div",{staticClass:"image-button-prev"}),i("div",{staticClass:"image-button-next"})])],1):e._e()])},r=[],a=i("75fc"),s=(i("c5f6"),i("2bf3")),o=i("8e14"),c={name:"ZkImageView",components:{"zk-popup-layer":s["default"],"zk-swiper":o["Swiper"],"zk-swiper-slide":o["SwiperSlide"]},props:{visible:{type:Boolean,default:!1},index:{type:Number},src:{type:String},srcList:{type:Array}},data:function(){return{isRestart:!1,currentIndex:0,swiperOptions:{loop:!0,grabCursor:!0,initialSlide:0,freeModeSticky:!0,autoHeight:!0,pagination:{el:".swiper-pagination",type:"fraction"},navigation:{prevEl:".image-button-prev",nextEl:".image-button-next"}}}},computed:{currentVisible:{get:function(){return this.visible},set:function(e){this.$emit("update:visible",e)}},currentSrcList:function(){return Array.isArray(this.srcList)?Object(a["a"])(this.srcList):[this.src]}},watch:{currentVisible:function(e){e&&(this.currentIndex=this.getInitIndex(),this.swiperOptions.initialSlide=this.currentIndex)},index:"updateInitIndex",currentIndex:function(e){this.$emit("update:index",this.currentIndex)}},methods:{getInitIndex:function(){return"number"===typeof this.index&&this.currentSrcList[this.index]?this.index:this.src?this.currentSrcList.indexOf(this.src):0},updateInitIndex:function(){this.currentIndex=this.getInitIndex(),this.swiperOptions.initialSlide=this.currentIndex},slideTo:function(e){if(this.swiper&&this.currentIndex!==e)return this.swiper.slideToLoop(e);this.currentIndex=e},handleReady:function(e){this.swiper=e,this.$emit("ready",this.swiper)},handleSlideChange:function(){this.swiper&&(this.currentIndex=this.swiper.realIndex)}},beforeDestroy:function(){this.$nextTick(function(){this.swiper&&delete this.swiper})}},u=c,l=(i("3654"),i("2877")),f=Object(l["a"])(u,n,r,!1,null,"286a3c30",null),d=f.exports;d.install=function(e){e.component(d.name,d)};t["default"]=d},3654:function(e,t,i){"use strict";var n=i("97d6"),r=i.n(n);r.a},"37c8":function(e,t,i){t.f=i("2b4c")},"3a72":function(e,t,i){var n=i("7726"),r=i("8378"),a=i("2d00"),s=i("37c8"),o=i("86cc").f;e.exports=function(e){var t=r.Symbol||(r.Symbol=a?{}:n.Symbol||{});"_"==e.charAt(0)||e in t||o(t,e,{value:s.f(e)})}},"5df3":function(e,t,i){"use strict";var n=i("02f4")(!0);i("01f9")(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,i=this._i;return i>=t.length?{value:void 0,done:!0}:(e=n(t,i),this._i+=e.length,{value:e,done:!1})})},"67ab":function(e,t,i){var n=i("ca5a")("meta"),r=i("d3f4"),a=i("69a8"),s=i("86cc").f,o=0,c=Object.isExtensible||function(){return!0},u=!i("79e5")(function(){return c(Object.preventExtensions({}))}),l=function(e){s(e,n,{value:{i:"O"+ ++o,w:{}}})},f=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!a(e,n)){if(!c(e))return"F";if(!t)return"E";l(e)}return e[n].i},d=function(e,t){if(!a(e,n)){if(!c(e))return!0;if(!t)return!1;l(e)}return e[n].w},h=function(e){return u&&p.NEED&&c(e)&&!a(e,n)&&l(e),e},p=e.exports={KEY:n,NEED:!1,fastKey:f,getWeak:d,onFreeze:h}},7191:function(e,t,i){"use strict";i.r(t);i("7f7f");var n=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{class:["zk-image-item",{"zk-image-item-add":!e.currentValue,"zk-image-item-readonly":e.readonly,"zk-image-item-cover":e.cover}],style:{width:e.width},attrs:{tabindex:"0"}},[i("div",{staticClass:"zk-image-item-box",style:{"background-image":"url("+e.currentValue+")"},on:{click:function(){return e.currentValue?e.viewImage():e.selectImage()}}},[i("div",{staticClass:"zk-image-item-operating",on:{click:function(t){return t.stopPropagation(),e.selectImage(t)}}},[e._t("select-label",[e._v("重新选择")])],2),i("div",{staticClass:"zk-image-item-notval"},[e._m(0),e.$slots.label?i("div",{staticClass:"zk-image-item-label"},[e._t("label")],2):e._e()])]),i("input",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],ref:"fileInput",attrs:{type:"file"}}),e.currentValue?i("zk-image-view",{attrs:{visible:e.imageViewVisible,src:e.currentValue,"src-list":e.currentViewSrcList},on:{"update:visible":function(t){e.imageViewVisible=t}}}):e._e()],1)},r=[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"icon-plus"},[i("span",{staticClass:"icon-plus-line1"}),i("span",{staticClass:"icon-plus-line2"})])}],a=(i("28a5"),i("75fc")),s=(i("f751"),i("e74d")),o=i("8ccb"),c=i("1ec7"),u=i("c440"),l=u["a"].msgbox,f={name:"ZkImageSelect",mixins:[o["c"]],components:{"zk-image-view":c["default"]},props:{options:Object,viewSrcList:{type:Array,default:function(){return[]}},readonly:{type:Boolean,required:!1},cover:{type:Boolean,required:!1},width:{default:"147px"}},data:function(){return{imageViewVisible:!1}},computed:{currentOptions:function(){return Object.assign({maxSize:1048576,minSize:0,limitExt:".jpg,.jpeg,.gif,.png,.bmp"},this.options||{},{accept:"image/*",parseImgBase64:!0,multiple:!1,onError:this.onFileSelectionError,forcedChange:!0})},currentViewSrcList:function(){return this.viewSrcList.indexOf(this.currentValue)<0?[this.currentValue].concat(Object(a["a"])(this.viewSrcList)):this.viewSrcList}},watch:{options:{immediate:!0,handler:"createSelection"},value:function(){this.currentValue=this.value}},methods:{createSelection:function(){return this.fileSelection=new s["a"](this.currentOptions),this.fileSelection},destroyedSelection:function(){this.fileSelection&&(this.fileSelection.destroy(),this.fileSelection=null)},onFileSelectionError:function(e){var t=this;switch(e.type){case"limitExt":(function(e){var i=e.split(",").map(function(e){return e.substring(1)}).join("，");l.alert("仅支持上传 ".concat(i," 格式的图片！"),"提示",{closeOnClickModal:!0,confirmButtonText:"重新选择",callback:function(e){if("confirm"===e)return t.selectImage()}})})(this.currentOptions.limitExt);break;case"maxSize":(function(e){var i="".concat(e,"字节"),n=e/1024,r=n%1===0&&"".concat(n,"KB")||null,a=n/1024,s=a%1===0&&"".concat(a,"MB")||null;l.alert("图片大小必须小于 ".concat(s||r||i," 以内！"),"提示",{closeOnClickModal:!0,confirmButtonText:"重新选择",callback:function(e){if("confirm"===e)return t.selectImage()}})})(this.currentOptions.maxSize);break;case"minSize":(function(e){var i="".concat(e,"字节"),n=e/1024,r=n%1===0&&"".concat(n,"KB")||null,a=n/1024,s=a%1===0&&"".concat(a,"MB")||null;l.alert("图片大小必须大于 ".concat(s||r||i," 以内！"),"提示",{closeOnClickModal:!0,confirmButtonText:"重新选择",callback:function(e){if("confirm"===e)return t.selectImage()}})})(this.currentOptions.maxSize);break;default:l.alert("选择文件出错！","提示",{closeOnClickModal:!0,confirmButtonText:"重新选择",callback:function(e){if("confirm"===e)return t.selectImage()}})}},selectImage:function(){var e=this;if(!this.readonly)return this.fileSelection.select(function(t){t[0]?(e.currentValue=t[0].base64||void 0,e.$emit("change-file",t[0].file)):e.deleteImage()})},deleteImage:function(){this.currentValue="",this.$emit("change-file",void 0)},viewImage:function(){this.currentValue&&(this.imageViewVisible=!0)}},destroyed:function(){this.destroyedSelection()}},d=f,h=(i("bd5f"),i("2877")),p=Object(h["a"])(d,n,r,!1,null,"e17dbbf2",null),m=p.exports;m.install=function(e){e.component(m.name,m)};t["default"]=m},"7bbc":function(e,t,i){var n=i("6821"),r=i("9093").f,a={}.toString,s="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],o=function(e){try{return r(e)}catch(t){return s.slice()}};e.exports.f=function(e){return s&&"[object Window]"==a.call(e)?o(e):r(n(e))}},8615:function(e,t,i){var n=i("5ca1"),r=i("504c")(!1);n(n.S,"Object",{values:function(e){return r(e)}})},"8a81":function(e,t,i){"use strict";var n=i("7726"),r=i("69a8"),a=i("9e1e"),s=i("5ca1"),o=i("2aba"),c=i("67ab").KEY,u=i("79e5"),l=i("5537"),f=i("7f20"),d=i("ca5a"),h=i("2b4c"),p=i("37c8"),m=i("3a72"),v=i("d4c0"),b=i("1169"),g=i("cb7c"),y=i("d3f4"),w=i("6821"),S=i("6a99"),k=i("4630"),x=i("2aeb"),I=i("7bbc"),O=i("11e9"),F=i("86cc"),z=i("0d58"),V=O.f,j=F.f,C=I.f,_=n.Symbol,$=n.JSON,E=$&&$.stringify,L="prototype",P=h("_hidden"),B=h("toPrimitive"),N={}.propertyIsEnumerable,A=l("symbol-registry"),q=l("symbols"),M=l("op-symbols"),T=Object[L],R="function"==typeof _,Z=n.QObject,D=!Z||!Z[L]||!Z[L].findChild,J=a&&u(function(){return 7!=x(j({},"a",{get:function(){return j(this,"a",{value:7}).a}})).a})?function(e,t,i){var n=V(T,t);n&&delete T[t],j(e,t,i),n&&e!==T&&j(T,t,n)}:j,K=function(e){var t=q[e]=x(_[L]);return t._k=e,t},W=R&&"symbol"==typeof _.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof _},Y=function(e,t,i){return e===T&&Y(M,t,i),g(e),t=S(t,!0),g(i),r(q,t)?(i.enumerable?(r(e,P)&&e[P][t]&&(e[P][t]=!1),i=x(i,{enumerable:k(0,!1)})):(r(e,P)||j(e,P,k(1,{})),e[P][t]=!0),J(e,t,i)):j(e,t,i)},G=function(e,t){g(e);var i,n=v(t=w(t)),r=0,a=n.length;while(a>r)Y(e,i=n[r++],t[i]);return e},H=function(e,t){return void 0===t?x(e):G(x(e),t)},Q=function(e){var t=N.call(this,e=S(e,!0));return!(this===T&&r(q,e)&&!r(M,e))&&(!(t||!r(this,e)||!r(q,e)||r(this,P)&&this[P][e])||t)},U=function(e,t){if(e=w(e),t=S(t,!0),e!==T||!r(q,t)||r(M,t)){var i=V(e,t);return!i||!r(q,t)||r(e,P)&&e[P][t]||(i.enumerable=!0),i}},X=function(e){var t,i=C(w(e)),n=[],a=0;while(i.length>a)r(q,t=i[a++])||t==P||t==c||n.push(t);return n},ee=function(e){var t,i=e===T,n=C(i?M:w(e)),a=[],s=0;while(n.length>s)!r(q,t=n[s++])||i&&!r(T,t)||a.push(q[t]);return a};R||(_=function(){if(this instanceof _)throw TypeError("Symbol is not a constructor!");var e=d(arguments.length>0?arguments[0]:void 0),t=function(i){this===T&&t.call(M,i),r(this,P)&&r(this[P],e)&&(this[P][e]=!1),J(this,e,k(1,i))};return a&&D&&J(T,e,{configurable:!0,set:t}),K(e)},o(_[L],"toString",function(){return this._k}),O.f=U,F.f=Y,i("9093").f=I.f=X,i("52a7").f=Q,i("2621").f=ee,a&&!i("2d00")&&o(T,"propertyIsEnumerable",Q,!0),p.f=function(e){return K(h(e))}),s(s.G+s.W+s.F*!R,{Symbol:_});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ie=0;te.length>ie;)h(te[ie++]);for(var ne=z(h.store),re=0;ne.length>re;)m(ne[re++]);s(s.S+s.F*!R,"Symbol",{for:function(e){return r(A,e+="")?A[e]:A[e]=_(e)},keyFor:function(e){if(!W(e))throw TypeError(e+" is not a symbol!");for(var t in A)if(A[t]===e)return t},useSetter:function(){D=!0},useSimple:function(){D=!1}}),s(s.S+s.F*!R,"Object",{create:H,defineProperty:Y,defineProperties:G,getOwnPropertyDescriptor:U,getOwnPropertyNames:X,getOwnPropertySymbols:ee}),$&&s(s.S+s.F*(!R||u(function(){var e=_();return"[null]"!=E([e])||"{}"!=E({a:e})||"{}"!=E(Object(e))})),"JSON",{stringify:function(e){var t,i,n=[e],r=1;while(arguments.length>r)n.push(arguments[r++]);if(i=t=n[1],(y(t)||void 0!==e)&&!W(e))return b(t)||(t=function(e,t){if("function"==typeof i&&(t=i.call(this,e,t)),!W(t))return t}),n[1]=t,E.apply($,n)}}),_[L][B]||i("32e9")(_[L],B,_[L].valueOf),f(_,"Symbol"),f(Math,"Math",!0),f(n.JSON,"JSON",!0)},"8ccb":function(e,t,i){"use strict";i("ac4d"),i("8a81"),i("5df3"),i("ac6a"),i("cadf"),i("8615");var n=i("75fc"),r=(i("551c"),{componentName:"ZkForm",props:{model:{type:Object},rules:{type:Object},disabled:{type:Boolean,default:!1}},provide:function(){return{zkForm:this}},data:function(){return{fieldInstanceList:[]}},methods:{onAddFieldInstance:function(e){this.fieldInstanceList.push(e)},onRemoveFieldInstance:function(e){var t=this.fieldInstanceList.indexOf(e);t<0||this.fieldInstanceList.splice(t,1)},validate:function(e){var t=this,i=function(e){return new Promise(function(t,i){return e.validate(void 0,function(e,i){var r;return t((r=[]).concat.apply(r,Object(n["a"])(Object.values(i||{}))))})})},r=function(r,a){return Promise.all(t.fieldInstanceList.map(function(e){return i(e)})).then(function(t){var i,s=(i=[]).concat.apply(i,Object(n["a"])(t)),o=!!s.length;return e&&e(o,s),o?a&&a(o):r&&r(o)})};return e?r():new Promise(r)},clearValidate:function(){var e=!0,t=!1,i=void 0;try{for(var n,r=this.fieldInstanceList[Symbol.iterator]();!(e=(n=r.next()).done);e=!0){var a=n.value;a.clearValidate()}}catch(s){t=!0,i=s}finally{try{e||null==r.return||r.return()}finally{if(t)throw i}}}},created:function(){this.$on("zk.form.addFieldInstance",this.onAddFieldInstance),this.$on("zk.form.removeFieldInstance",this.onRemoveFieldInstance)}}),a=(i("a481"),i("28a5"),i("e74d")),s=i("cb7e"),o=Symbol("value"),c={componentName:"ZkFormItem",mixins:[s["a"]],inject:{zkForm:{default:void 0}},props:{prop:{type:String,default:""},props:{type:Array},value:{default:o},rules:{type:[Object,Array]},required:{type:Boolean,default:void 0}},provide:function(){return{zkFormItem:this}},data:function(){return{validateState:"",validateMessage:"",currentRequired:this.required}},computed:{currentProps:function(){return this.value!==o?["value"]:this.props||this.prop&&[this.prop]||[]}},methods:{pathToArray:function(e){return Array.isArray(e)?e:e.replace(/\[/g,".").replace(/\]/g,"").split(".")},getValidateParams:function(){var e=this.value!==o?{value:this.value}:this.zkForm&&this.zkForm.model||{},t=this.zkForm&&this.zkForm.rules||{},i=t,n=this.rules,r=void 0!==this.required?{required:!!this.required}:[],s={},c=this.currentProps,u={};this.currentRequired=this.required;var l=!0,f=!1,d=void 0;try{for(var h,p=c[Symbol.iterator]();!(l=(h=p.next()).done);l=!0){var m=h.value;if(m){for(var v=this.pathToArray(m),b=s,g=i,y=0;y<v.length;y++){var w=v[y];if(g&&(g=g[w]||null),y<v.length-1)b[w]={type:"object",required:!0,fields:{}},b=b[w].fields;else{var S=[].concat(n||g||[]).concat(r);S.length&&(b[w]=S),this.currentRequired=S.some(function(e){return e.required})}}Object(a["d"])(u,m,Object(a["c"])(e,m))}}}catch(k){f=!0,d=k}finally{try{l||null==p.return||p.return()}finally{if(f)throw d}}return{model:u,descriptor:s}},validate:function(e,t){var i=this,n=function(e){i.$nextTick(function(){var n=i.getValidateParams(),r=n.model,s=n.descriptor;Object(a["e"])(r,s,{},function(n,r){return i.validateState=n?"error":"success",i.validateMessage=n&&n[0]&&n[0].message||"",t&&t(i.validateMessage,r),e&&e(!!n)})})};return t?n():new Promise(n)},clearValidate:function(){this.validateState="",this.validateMessage=""},onFieldFocus:function(){},onFieldBlur:function(){return this.validate("blur")},onFieldChange:function(){return this.validate("change")}},mounted:function(){this.getValidateParams(),this.currentProps.length&&(this.dispatch("ZkForm","zk.form.addFieldInstance",[this]),this.$on("zk.form.blur",this.onFieldBlur),this.$on("zk.form.focus",this.onFieldFocus),this.$on("zk.form.change",this.onFieldChange))},beforeDestroy:function(){this.currentProps.length&&this.dispatch("ZkForm","zk.form.removeFieldInstance",[this])}},u={mixins:[s["a"]],inject:{zkForm:{default:void 0},zkFormItem:{default:void 0}},props:{value:{},disabled:Boolean,disabledFormValidate:Boolean},data:function(){return{currentValue:this.value}},computed:{currentDisabled:function(){return this.disabled||(this.zkForm||{}).disabled}},watch:{value:function(){this.currentValue=this.value},currentValue:function(){if(this.$emit("input",this.currentValue),!this.disabledFormValidate)return this.dispatch("ZkFormItem","zk.form.change",[this.currentValue])}},methods:{handleFormFocus:function(e){this.disabledFormValidate||this.dispatch("ZkFormItem","zk.form.focus",[this.currentValue])},handleFormBlur:function(e){this.disabledFormValidate||this.dispatch("ZkFormItem","zk.form.blur",[this.currentValue])}}};i.d(t,"a",function(){return r}),i.d(t,"b",function(){return c}),i.d(t,"c",function(){return u})},"97d6":function(e,t,i){},ac4d:function(e,t,i){i("3a72")("asyncIterator")},bd5f:function(e,t,i){"use strict";var n=i("ee32"),r=i.n(n);r.a},cb7e:function(e,t,i){"use strict";i("ac6a");function n(e,t,i){this.$children.forEach(function(r){var a=r.$options.componentName;a===e?r.$emit.apply(r,[t].concat(i)):n.apply(r,[e,t].concat([i]))})}t["a"]={methods:{dispatch:function(e,t,i){var n=this.$parent||this.$root,r=n.$options.componentName;while(n&&(!r||r!==e))n=n.$parent,n&&(r=n.$options.componentName);n&&n.$emit.apply(n,[t].concat(i))},broadcast:function(e,t,i){n.call(this,e,t,i)}}}},d4c0:function(e,t,i){var n=i("0d58"),r=i("2621"),a=i("52a7");e.exports=function(e){var t=n(e),i=r.f;if(i){var s,o=i(e),c=a.f,u=0;while(o.length>u)c.call(e,s=o[u++])&&t.push(s)}return t}},ee32:function(e,t,i){}}]);
//# sourceMappingURL=zkm-vue-ui.umd.min.zk-image-select.js.map