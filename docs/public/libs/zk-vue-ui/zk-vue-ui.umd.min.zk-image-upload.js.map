{"version":3,"sources":["webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue?07b9","webpack://zk-vue-ui/packages/components/web/image-upload/src/image-upload.vue","webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue?e7a3","webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue","webpack://zk-vue-ui/./packages/components/web/image-upload/index.js","webpack://zk-vue-ui/./packages/components/web/image-upload/src/image-upload.vue?d492"],"names":["render","_vm","this","_h","$createElement","_c","_self","class","zk-image-upload-loading","isUpload","staticClass","style","uploadProgress","_v","_s","attrs","view-src-list","viewSrcList","options","currentOptions","readonly","cover","on","change-file","changeFile","model","value","callback","$$v","src","expression","_t","slot","$slots","staticRenderFns","image_uploadvue_type_script_lang_js_","name","components","zk-image-select","image_select","props","String","Object","Array","type","Boolean","required","httpRequest","Function","data","currentValue","computed","assign","watch","$emit","undefined","methods","file","_this","a","f","d","c","setTimeout","b","onProgress","e","loaded","total","onSuccess","result","onError","error","message","src_image_uploadvue_type_script_lang_js_","component","componentNormalizer","image_upload","ImageUpload","install","Vue","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_image_upload_vue_vue_type_style_index_0_id_4c021ee6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0__","__webpack_require__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_image_upload_vue_vue_type_style_index_0_id_4c021ee6_lang_scss_scoped_true___WEBPACK_IMPORTED_MODULE_0___default","n"],"mappings":"gOAAAA,EAAA,WAA0B,IAAAC,EAAAC,KAAaC,EAAAF,EAAAG,eAA0BC,EAAAJ,EAAAK,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,MAAA,oBAA2BC,0BAAAP,EAAAQ,YAA4C,CAAAJ,EAAA,OAAYK,YAAA,4BAAuC,CAAAL,EAAA,OAAYK,YAAA,cAAAC,MAAA,gBAAAV,EAAAW,eAAA,MAAgF,CAAAP,EAAA,OAAYK,YAAA,oBAA8BL,EAAA,OAAYK,YAAA,oBAA+B,CAAAL,EAAA,QAAAJ,EAAAY,GAAAZ,EAAAa,GAAAb,EAAAW,gBAAA,aAAAP,EAAA,mBAAkFU,MAAA,CAAOC,gBAAAf,EAAAgB,YAAAC,QAAAjB,EAAAkB,eAAAC,SAAAnB,EAAAmB,SAAAC,MAAApB,EAAAoB,OAAuGC,GAAA,CAAKC,cAAAtB,EAAAuB,YAA6BC,MAAA,CAAQC,MAAAzB,EAAA,IAAA0B,SAAA,SAAAC,GAAyC3B,EAAA4B,IAAAD,GAAYE,WAAA,QAAmB,CAAA7B,EAAA8B,GAAA,cAAuBC,KAAA,UAAe/B,EAAAgC,OAAA,gBAAyFhC,EAAA8B,GAAA,qBAA8BC,KAAA,iBAAvH/B,EAAA8B,GAAA,WAAA9B,EAAAY,GAAA,UAAmEmB,KAAA,kBAA0E,QAC13BE,EAAA,uCCqBAC,EAAA,CACAC,KAAA,gBACAC,WAAA,CACAC,kBAAAC,EAAA,YAEAC,MAAA,CACAd,MAAAe,OACAvB,QAAAwB,OACAzB,YAAA0B,MACAvB,SAAA,CACAwB,KAAAC,QACAC,UAAA,GAEAzB,MAAA,CACAuB,KAAAC,QACAC,UAAA,GAEAC,YAAA,CACAH,KAAAI,SACAF,UAAA,IAGAG,KAtBA,WAuBA,OACApB,IAAA3B,KAAAwB,MACAwB,aAAAhD,KAAAwB,MACAjB,UAAA,EACAG,eAAA,IAGAuC,SAAA,CACAhC,eADA,WAEA,OAAAuB,OAAAU,OAAA,GACAlD,KAAAgB,SAAA,MAGAmC,MAAA,CACA3B,MADA,WAEAxB,KAAA2B,IAAA3B,KAAAwB,MACAxB,KAAAgD,aAAAhD,KAAAwB,OAEAwB,aALA,WAMAhD,KAAAgD,cACAhD,KAAAoD,MAAA,qBAAAC,GAEArD,KAAAoD,MAAA,QAAApD,KAAAgD,gBAGAM,QAAA,CACAhC,WADA,SACAiC,GAAA,IAAAC,EAAAxD,KACA,SAAAyD,EAAAC,EAAAC,EAAAC,GACA,yBAAAC,WAAA,kBAAAH,EAAAE,IAAAD,IAGA,SAAAG,KAEAL,EAAAK,EAAA,QAEAP,GAIAvD,KAAAU,eAAA,EACAV,KAAAO,UAAA,EACAP,KAAA6C,YAAA,CACAE,KAAA,CAAAQ,QACAQ,WAAA,SAAAC,GACAR,EAAA9C,eAAAsD,EAAAC,OAAAD,EAAAE,MAAA,OAEAC,UAAA,SAAAC,GACAZ,EAAAR,aAAAoB,EACAZ,EAAA7B,IAAA6B,EAAAR,aACAQ,EAAAjD,UAAA,GAEA8D,QAAA,SAAAC,GACAd,EAAAR,aAAA,GACAQ,EAAA7B,IAAA,GACA6B,EAAAjD,UAAA,EACAgE,EAAA,KAAAD,MAAA/B,OAAA+B,IAAA,mBAnBAtE,KAAAgD,aAAA,MCjFmYwB,EAAA,0BCQnYC,EAAgBjC,OAAAkC,EAAA,KAAAlC,CACdgC,EACA1E,EACAkC,GACF,EACA,KACA,WACA,MAIe2C,EAAAF,UCjBfG,EAAYC,QAAU,SAAUC,GAC9BA,EAAIL,UAAUG,EAAY1C,KAAM0C,IAGnBA,kDCNf,IAAAG,EAAAC,EAAA,QAAAC,EAAAD,EAAAE,EAAAH,GAAumBE,EAAG","file":"zk-vue-ui.umd.min.zk-image-upload.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{class:['zk-image-upload', { 'zk-image-upload-loading': _vm.isUpload }]},[_c('div',{staticClass:\"zk-image-upload-progress\"},[_c('div',{staticClass:\"zk-progress\",style:((\"padding-top: \" + _vm.uploadProgress + \"%;\"))},[_c('div',{staticClass:\"zk-progress-bar\"}),_c('div',{staticClass:\"zk-progress-text\"},[_c('span',[_vm._v(_vm._s(_vm.uploadProgress)+\"%\")])])])]),_c('zk-image-select',{attrs:{\"view-src-list\":_vm.viewSrcList,\"options\":_vm.currentOptions,\"readonly\":_vm.readonly,\"cover\":_vm.cover},on:{\"change-file\":_vm.changeFile},model:{value:(_vm.src),callback:function ($$v) {_vm.src=$$v},expression:\"src\"}},[_vm._t(\"label\",null,{\"slot\":\"label\"}),(!_vm.$slots['upload-label'])?_vm._t(\"default\",[_vm._v(\"重新上传\")],{\"slot\":\"select-label\"}):_vm._t(\"upload-label\",null,{\"slot\":\"select-label\"})],2)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div :class=\"['zk-image-upload', { 'zk-image-upload-loading': isUpload }]\">\r\n    <div class=\"zk-image-upload-progress\">\r\n      <div class=\"zk-progress\" :style=\"`padding-top: ${ uploadProgress }%;`\">\r\n        <div class=\"zk-progress-bar\"></div>\r\n        <div class=\"zk-progress-text\">\r\n          <span>{{ uploadProgress }}%</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <zk-image-select v-model=\"src\" :view-src-list=\"viewSrcList\" :options=\"currentOptions\" :readonly=\"readonly\" :cover=\"cover\" @change-file=\"changeFile\">\r\n      <slot name=\"label\" slot=\"label\"></slot>\r\n      <slot v-if=\"!$slots['upload-label']\" slot=\"select-label\">重新上传</slot>\r\n      <slot v-else name=\"upload-label\" slot=\"select-label\"></slot>\r\n    </zk-image-select>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport ImageSelect from '../../image-select'\r\nimport { message } from '../../message'\r\n\r\nexport default {\r\n  name: 'ZkImageUpload',\r\n  components: {\r\n    'zk-image-select': ImageSelect\r\n  },\r\n  props: {\r\n    value: String,\r\n    options: Object,\r\n    viewSrcList: Array,\r\n    readonly: {\r\n      type: Boolean,\r\n      required: false\r\n    },\r\n    cover: {\r\n      type: Boolean,\r\n      required: false\r\n    },\r\n    httpRequest: {\r\n      type: Function,\r\n      required: true\r\n    }\r\n  },\r\n  data () {\r\n    return {\r\n      src: this.value,\r\n      currentValue: this.value,\r\n      isUpload: false,\r\n      uploadProgress: 0\r\n    }\r\n  },\r\n  computed: {\r\n    currentOptions () {\r\n      return Object.assign({\r\n      }, this.options || {})\r\n    }\r\n  },\r\n  watch: {\r\n    value () {\r\n      this.src = this.value\r\n      this.currentValue = this.value\r\n    },\r\n    currentValue () {\r\n      if (!this.currentValue) {\r\n        this.$emit('upload-result', undefined)\r\n      }\r\n      this.$emit('input', this.currentValue)\r\n    }\r\n  },\r\n  methods: {\r\n    changeFile (file) {\r\n      function a (f, d, c) {\r\n        return () => setTimeout(() => f(c), d)\r\n      }\r\n\r\n      function b () {}\r\n\r\n      a(b, 200, {})\r\n\r\n      if (!file) {\r\n        this.currentValue = ''\r\n        return\r\n      }\r\n      this.uploadProgress = 0\r\n      this.isUpload = true\r\n      this.httpRequest({\r\n        data: { file },\r\n        onProgress: (e) => {\r\n          this.uploadProgress = ((e.loaded / e.total * 100) | 0)\r\n        },\r\n        onSuccess: result => {\r\n          this.currentValue = result\r\n          this.src = this.currentValue\r\n          this.isUpload = false\r\n        },\r\n        onError: error => {\r\n          this.currentValue = ''\r\n          this.src = ''\r\n          this.isUpload = false\r\n          message.error(String(error) || '图片上传失败，请重试。')\r\n        }\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.zk-image-upload {\r\n  position: relative;\r\n  display: inline-block;\r\n}\r\n.zk-image-upload-progress {\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  color: #fff;\r\n  transition: opacity .2s cubic-bezier(.645,.045,.355,1);\r\n  z-index: 1;\r\n  display: none;\r\n  .zk-progress {\r\n    position: relative;\r\n    width: 100%;\r\n    height: 100%;\r\n    box-sizing: border-box;\r\n    transition: padding-top .2s;\r\n    overflow: hidden;\r\n    .zk-progress-bar {\r\n      width: 100%;\r\n      height: 100%;\r\n      text-align: center;\r\n      padding: 13px;\r\n      background-color: rgba(52, 52, 52, .6);\r\n      box-sizing: border-box;\r\n    }\r\n    .zk-progress-text {\r\n      position: absolute;\r\n      top: 0;\r\n      left: 0;\r\n      z-index: 1;\r\n      width: 100%;\r\n      height: 100%;\r\n      display: flex;\r\n      align-items: center;\r\n      justify-content: center;\r\n      white-space: nowrap;\r\n    }\r\n  }\r\n}\r\n.zk-image-upload-loading .zk-image-upload-progress {\r\n  display: block;\r\n}\r\n.zk-image-upload-loading /deep/ .zk-image-item-operating {\r\n  display: none !important;\r\n}\r\n</style>\r\n","import mod from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-upload.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../../../../node_modules/thread-loader/dist/cjs.js!../../../../../node_modules/babel-loader/lib/index.js!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-upload.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./image-upload.vue?vue&type=template&id=4c021ee6&scoped=true&\"\nimport script from \"./image-upload.vue?vue&type=script&lang=js&\"\nexport * from \"./image-upload.vue?vue&type=script&lang=js&\"\nimport style0 from \"./image-upload.vue?vue&type=style&index=0&id=4c021ee6&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"4c021ee6\",\n  null\n  \n)\n\nexport default component.exports","import ImageUpload from './src/image-upload'\r\n\r\nImageUpload.install = function (Vue) {\r\n  Vue.component(ImageUpload.name, ImageUpload)\r\n}\r\n\r\nexport default ImageUpload\r\n","import mod from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-upload.vue?vue&type=style&index=0&id=4c021ee6&lang=scss&scoped=true&\"; export default mod; export * from \"-!../../../../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../../../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../../../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../../../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./image-upload.vue?vue&type=style&index=0&id=4c021ee6&lang=scss&scoped=true&\""],"sourceRoot":""}